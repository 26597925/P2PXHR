<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
    <title>
        Peer-Assisted image xhr request
    </title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <script type="text/javascript" src="//api.peer5.com/peer5.js?id=z142i5n5qypq4cxr"></script>
</head>

<body>

<img id="cat"></img>

<script type="text/javascript">
    
    url = 'http://ec2-54-215-66-22.us-west-1.compute.amazonaws.com/examples/cat.jpg';
    
    //Peer5
    if (typeof peer5 == 'object') {
        console.log('Peer5 is Loaded');
        var request = new peer5.Request();
        request.open("GET",url);
        request.onprogress = function(e){
            console.log(e.loadedHTTP);
            console.log(e.loadedP2P);
        };
        request.onload = function(e){
            console.log(e.currentTarget.response);
            $("#cat").attr("src",e.currentTarget.response);
        };
        request.onerror = function(e){
            console.log(e.error);
        }
        request.send();
    } else {
        console.log('Error loading peer5 script file. dying.');
    }
</script>
</body>
</html>